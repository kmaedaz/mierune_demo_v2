<!DOCTYPE HTML>
<html>
<head>
  <!-- シナリオ -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data:; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <!script src="components/loader.js"><!/script>
    <script src="lib/onsenui/js/onsenui.min.js"></script>
    
    
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="lib/onsenui/css/onsenui.css">
    <link rel="stylesheet" href="lib/onsenui/css/onsen-css-components.css">


    <script src="./js/underscore-min.js"></script>
    <script src="./js/jquery-1.11.3.min.js"></script>
    <script src="./js/backbone-min.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/anime_btn.css">
    <script src="js/btn.js"></script>
    <script src="js/irkit.js"></script>

    <script src="js/scenario.js"></script>



<style>

    #aircon_panel{
        position: relative;
	    width:80%;
    }

	#aircon_base{
        position: relative;
	}

    
    
    #aircon_up {
        position: absolute;
        top: 34px;
        Left: 390px;
    }
    
    #aircon_down {
        position: absolute;
        top: 104px;
        Left: 390px;
    }
    #aircon_temp_txt {
        position: absolute;
        font-size: 1.8em;
        font-weight: bold;
        top: 64px;
        Left: 124px;
    }
    

	//TV
	#tv_power_base{
	    position: relative;
	}

	  #tv_power {
    position: absolute;
    top: 170px;
    Left: 68px;
	}

	#tv_ch_base {
	    position: relative;
	}


	 #tv_ch_up{
        position: absolute;
        top: 140px;
        Left: 68px;
        
	}

	 #tv_ch_down{
        position: absolute;
        top: 360px;
        Left: 68px;
	}

	</style>


  <script>
    var opration_flag =  false; //操作されたかチェック
	var scenario_post_str ;
    	function  opration_check(myNavigator) {
			 if(!opration_flag){
				console.log("index");
    			console.log("scenario_post_str:" +scenario_post_str);

                scenario_exec(scenario_post_str);
				// 家電機器初期設定
                sendIRkit_init_command();
                myNavigator.resetToPage("exp_index.html");
			 } else{
				console.log("index");
			 }
			 opration_flag=false;
		}


        var rep_hits_flag =  false; //連打防止

    	function  hits_flag() {
			rep_hits_flag= true;
		    setTimeout( function (){
				console.log("disabled");
				hits_flag =false ;
		    } , 1000); 			
		}


    (function ($) {
        $('#returnhomea').on('show', function(){
            this.play();
            console.log("aaa");
        });
        $('#returnhomeb').on('show', function(){
            this.play();
            console.log("cccc");
        });

    })(jQuery);

    ons.ready(function() {
		console.log("Onsen UI is ready!");
		//
		const OP_TIME = 1300; //操作画面への遷移
		const NEXTPAGE_TIME = 3000; //操作画面への遷移
		const DEFAULT_TEMPERATURE=26;// 初期温度
    	const NO_OPRATIN_TIME = 31000; //何もしなければ操作画面への遷移
		const RETURN_HOME_LATTER_HALF =1600 ;//･帰宅後半の動画開始

        setBtnAnim();	

		/*
			イベントハンドラー
		*/
    	// 一定期間操作がなければ　機器操作index
    	
		setInterval("opration_check(myNavigator)",NO_OPRATIN_TIME); //
    	//  すべて


        $(document).on('click',function(e) {
		 opration_flag=true;
		});


        sendIRkit_init_command();

        /*
		// begin 機器操作インデックス
		*/
		$(document).on('click','#scene_detail_heatstroke',function(e) {
			setTimeout(	function (){
					scenario_post_str ="SCENARIO_POST_HEATPROTECT";
                    scenario_exec("SCENARIO_HEATPROTECT");
                    myNavigator.resetToPage("scene_detail_heatstroke.html");  //熱中症予防
			} , OP_TIME);
			console.log("scene_detail_heatstroke");
		});


		$(document).on('click','#scene_detail_crime',function(e) {
			setTimeout(	function (){
				scenario_post_str ="SCENARIO_POST_CRIMEDEFEND";
				myNavigator.resetToPage("scene_detail_crime.html");  //防犯
                 scenario_exec("SCENARIO_CRIMEDEFEND");
			} , OP_TIME);
			console.log("scene_detail_heatstroke");
		});

		//起床
		$(document).on('click','#scene_detail_wakeup',function(e) {
			setTimeout(	function (){
				scenario_post_str ="SCENARIO_POST_WAKEUP";
				myNavigator.resetToPage("scene_detail_wakup.html");  //起床
                 scenario_exec("SCENARIO_WAKEUP");
	
			} , OP_TIME);
			console.log("scene_detail_wakup");
		});

		//外出
		$(document).on('click','#scene_detail_outing',function(e) {
				scenario_post_str ="SCENARIO_POST_OUTING";
				setTimeout(	function (){
				myNavigator.resetToPage("scene_detail_outing.html");  //外出
                 scenario_exec("SCENARIO_OUTING");
	
			} , OP_TIME);
			console.log("scene_detail_outing");
		});


		//帰宅
		$(document).on('click','#scene_detail_return',function(e) {
            setTimeout(	function (){
				scenario_post_str ="SCENARIO_POST_RETURNING";
				myNavigator.resetToPage("scene_detail_return_a.html");  //帰宅前半
                 scenario_exec("SCENARIO_RETURNING",myNavigator);
                    setTimeout(    function (){
        				myNavigator.resetToPage("scene_detail_return_b.html", {animation: 'fade'});  //帰宅後半B
                    } , RETURN_HOME_LATTER_HALF);

            } , OP_TIME);
			console.log("scene_detail_outing");
		});



		/*
		// end 機器操作インデックス
		*/



		//シナリオインデクス
		$(document).on('click','.exp_index',function(e) {
            sendIRkit_init_command();
            console.log("exp_index");
			myNavigator.resetToPage("exp_index.html");
		});


    });

  </script>

</head>
<body>
  <!-- First navigation component: Navigator. This will remain always on top of the app. -->
  <ons-navigator id="myNavigator" var="myNavigator" page="exp_index.html" >

  <!--ons-navigator id="myNavigator" var="myNavigator" page="tv_control.html" -->


  </ons-navigator>
 <!-- 
	 機器の操作インデクス 
 -->
  <ons-template id="exp_index.html">

      <div class="center" id="toolbar-title">  <h1>シナリオ機能</h1></div>

    <div class="center" >
     <h2>体感したいシナリオをタップしてください。</h2>
    </div>
    
    


<section style="padding-left: 10%">


	<ons-button modifier="quiet" id="scene_detail_heatstroke">
	<img border="0" src="./images/index_scene_heatstroke.png"   width=80% alt="熱中症予防">
	</ons-button>


	<ons-button modifier="quiet" id="scene_detail_crime">
	<img border="0" src="./images/index_scene_crime.png"  width=80% alt="防犯">
	</ons-button>

	<ons-button modifier="quiet" id="scene_detail_wakeup">
	<img border="0" src="./images/index_scene_wakeup.png"  width=80% alt="起床">
	</ons-button>


	<ons-button modifier="quiet" id="scene_detail_outing">
	<img border="0" src="./images/index_scene_outing.png"  width=80% alt="外出">
	</ons-button>
	    

	<ons-button modifier="quiet" id="scene_detail_return">
	<img border="0" src="./images/index_scene_return.png"  width=80% alt="帰宅">
	</ons-button>


</section>

<ons-button modifier="quiet" >
    <a href="./index.html" >
  <img border="0" src="./images/m_button_topback.png" class="btn_tap_anim"  width=80% alt="トップに戻る">
    </a>
    
</ons-button>


	    
</ons-template>



 <!-- 
　熱中症予防
	 映像終了後（映像は静止状態）に温度計がアップ、その3秒後にエアコンがON、３秒後にカーテンが閉まる。
	３０秒間操作がない場合、初期設定され、シナリオTOPに戻る。
	 -->
  <ons-template id="scene_detail_heatstroke.html">
			  <div class="center" id="toolbar-title">  <h1>熱中症予防シナリオ</h1></div>
    <section style="padding-left: 0px; text-align: center;">
                <div class="scene_view" >
                    <video src="./movie/heatstroke_161227.mp4" autoplay  preload="none" class="movie_field" width="85%"> </video>
                    <img src="./images/scene_home.png" class="photo scene_frame small_view "  >
                    <img src="./images/scenario-aircom.png" class="scene_frame blink_anime small_view scenario-aircom" >
                	<img src="./images/scenario-cd.png" class="scene_frame blink_anime small_view scenario-cd" >
                	<img src="./images/scenario-cur.png" class="scene_frame blink_anime small_view scenario-cur" >
                    <img src="./images/scenario-kasitu.png" class="scene_frame blink_anime small_view scenario-kasitu" >
                    <img src="./images/scenario-shomei.png" class="scene_frame blink_anime small_view scenario-shomei" >
                    <img src="./images/scenario-tv.png"  class="scene_frame blink_anime small_view scenario-tv" >
                    <img src="./images/scenario-kyuji.png" class="scene_frame blink_anime small_view scenario-kyuji" >
                </div>

			<div class="exp_desc">
    			<p>室内温度が２８℃を超えるとエアコンが動き出し、
    			カーテンが閉まります。
    			</p>
    			<div class="scene_top_button">
    				<img border="0" src="./images/m_button_sceneback.png" class="btn_tap_anim exp_index""   alt="機器の操作に戻る">
    			</div>

			</div>
	</section>
  </ons-template>



 <!-- 
　　　防犯シナリオ
	映像終了後（映像は静止状態）に演出照明がOFF、５秒後にカーテンが閉まり、
	
	 -->
  <ons-template id="scene_detail_crime.html">
			  <div class="center" id="toolbar-title">  <h1>防犯シナリオ</h1></div>
    <section style="padding-left: 0px; text-align: center;">
            <div class="scene_view" >
                <video src="./movie/crime_161227.mp4" autoplay preload="none" class="movie_field" width="85%"> </video>
                <img src="./images/scene_home.png" class="photo scene_frame small_view "  >
    	         <img src="./images/scenario-aircom.png" class="scene_frame blink_anime small_view scenario-aircom" >
            	<img src="./images/scenario-cd.png" class="scene_frame blink_anime small_view scenario-cd" >
            	<img src="./images/scenario-cur.png" class="scene_frame blink_anime small_view scenario-cur" >
                <img src="./images/scenario-kasitu.png" class="scene_frame blink_anime small_view scenario-kasitu" >
                <img src="./images/scenario-shomei.png" class="scene_frame blink_anime small_view scenario-shomei" >
                <img src="./images/scenario-tv.png"  class="scene_frame blink_anime small_view scenario-tv" >
                <img src="./images/scenario-kyuji.png" class="scene_frame blink_anime small_view scenario-kyuji" >
			</div>

			<div class="exp_desc">
			<p>夕方になり室内が暗くなったら、カーテンが閉まり、
				照明が点灯します。
			</p>
        		<div class="scene_top_button">
    				<img border="0" src="./images/m_button_sceneback.png" class="btn_tap_anim exp_index""   alt="機器の操作に戻る">
    			</div>
			</div>>

	</section>
  </ons-template>



 <!-- 
	起床	
	朝起きると、オーディオがオンになり、
	カーテンが開きます。
	映像終了後（映像は静止状態）に演出照明がOFF、５秒後にカーテンが閉まり、
	 -->
  <ons-template id="scene_detail_wakup.html">
			  <div class="center" id="toolbar-title">  <h1>起床シナリオ</h1></div>
    <section style="padding-left: 0px; text-align: center;">
            <div class="scene_view" >
                <video src="./movie/wakeup_161227.mp4" autoplay class="movie_field" width="85%"> </video>
                <img src="./images/scene_home.png" class="photo scene_frame small_view "  >
                <img src="./images/scenario-aircom.png" class="scene_frame blink_anime small_view scenario-aircom" >
            	<img src="./images/scenario-cd.png" class="scene_frame blink_anime small_view scenario-cd" >
            	<img src="./images/scenario-cur.png" class="scene_frame blink_anime small_view scenario-cur" >
                <img src="./images/scenario-kasitu.png" class="scene_frame blink_anime small_view scenario-kasitu" >
                <img src="./images/scenario-shomei.png" class="scene_frame blink_anime small_view scenario-shomei" >
                <img src="./images/scenario-tv.png"  class="scene_frame blink_anime small_view scenario-tv" >
                <img src="./images/scenario-kyuji.png" class="scene_frame blink_anime small_view scenario-kyuji" >
			</div>

			<div class="exp_desc">
			<p>	朝起きると、オーディオがオンになり、
				カーテンが開きます。

			</p>
            	<div class="scene_top_button">
    				<img border="0" src="./images/m_button_sceneback.png" class="btn_tap_anim exp_index""   alt="機器の操作に戻る">
    			</div>

			</div>

	</section>
  </ons-template>


   <!-- 
	外出
	朝起きると、オーディオがオンになり、
	カーテンが開きます。
	映像終了後（映像は静止状態）に演出照明がOFF、５秒後にカーテンが閉まり、
	 -->
  <ons-template id="scene_detail_outing.html">
			  <div class="center" id="toolbar-title">  <h1>外出シナリオ</h1></div>
        <section style="padding-left: 0px; text-align: center;">
            <div class="scene_view" >
                <video src="./movie/goout_161227.mp4" autoplay class="movie_field" width="85%"> </video>
                <img src="./images/scene_home.png" class="photo scene_frame small_view "  >
                <img src="./images/scenario-aircom.png" class="scene_frame blink_anime small_view scenario-aircom" >
            	<img src="./images/scenario-cd.png" class="scene_frame blink_anime small_view scenario-cd" >
            	<img src="./images/scenario-cur.png" class="scene_frame blink_anime small_view scenario-cur" >
                <img src="./images/scenario-kasitu.png" class="scene_frame blink_anime small_view scenario-kasitu" >
                <img src="./images/scenario-shomei.png" class="scene_frame blink_anime small_view scenario-shomei" >
                <img src="./images/scenario-tv.png"  class="scene_frame blink_anime small_view scenario-tv" >
                <img src="./images/scenario-kyuji.png" class="scene_frame blink_anime small_view scenario-kyuji" >
			</div>

			<div class="exp_desc">
			<p>	外出の時、玄関を出て家を離れると、
				照明とエアコンのスイッチがオフになります。

			</p>
            	<div class="scene_top_button">
    				<img border="0" src="./images/m_button_sceneback.png" class="btn_tap_anim exp_index""   alt="機器の操作に戻る">
    			</div>

			</div>
	</section>
  </ons-template>




   <!-- 
	帰宅
	朝起きると、オーディオがオンになり、
	カーテンが開きます。
	映像終了後（映像は静止状態）に演出照明がOFF、５秒後にカーテンが閉まり、
	 -->
  <ons-template id="scene_detail_return_a.html">
			  <div class="center" id="toolbar-title">  <h1>帰宅シナリオ</h1></div>
        <section style="padding-left: 0px; text-align: center;">
            <div class="scene_view" >
                <video src="./movie/returnhome_161227a.mp4" id="returnhomea" autoplay class="movie_field" width="85%" > </video>
                <img src="./images/scene_home.png" class="photo scene_frame small_view "  >
                <img src="./images/scenario-aircom.png" class="scene_frame blink_anime small_view scenario-aircom" >
            	<img src="./images/scenario-cd.png" class="scene_frame blink_anime small_view scenario-cd" >
            	<img src="./images/scenario-cur.png" class="scene_frame blink_anime small_view scenario-cur" >
                <img src="./images/scenario-kasitu.png" class="scene_frame blink_anime small_view scenario-kasitu" >
                <img src="./images/scenario-shomei.png" class="scene_frame blink_anime small_view scenario-shomei" >
                <img src="./images/scenario-tv.png"  class="scene_frame blink_anime small_view scenario-tv" >
                <img src="./images/scenario-kyuji.png" class="scene_frame blink_anime small_view scenario-kyuji" >
			</div>

			<div class="exp_desc">
			<p>				帰宅する前に外からの遠隔操作で、
				エアコンと照明をオンにし、給湯を行います。

			</p>
            	<div class="scene_top_button">
    				<img border="0" src="./images/m_button_sceneback.png" class="btn_tap_anim exp_index""   alt="機器の操作に戻る">
    			</div>

			</div>

	</section>
  </ons-template>

    
   <!-- 
    帰宅
	朝起きると、オーディオがオンになり、
	カーテンが開きます。
	映像終了後（映像は静止状態）に演出照明がOFF、５秒後にカーテンが閉まり、
	 -->
  <ons-template id="scene_detail_return_b.html">
			  <div class="center" id="toolbar-title">  <h1>帰宅シナリオ</h1></div>
        <section style="padding-left: 0px; text-align: center;">
            <div class="scene_view" >
                <video src="./movie/returnhome_161227b.mp4" id="returnhomea" autoplay class="movie_field" width="85%"  > </video>
                <img src="./images/scene_home.png" class="photo scene_frame small_view "  >
                <img src="./images/scenario-aircom.png" class="scene_frame blink_anime small_view scenario-aircom" >
            	<img src="./images/scenario-cd.png" class="scene_frame blink_anime small_view scenario-cd" >
            	<img src="./images/scenario-cur.png" class="scene_frame blink_anime small_view scenario-cur" >
                <img src="./images/scenario-kasitu.png" class="scene_frame blink_anime small_view scenario-kasitu" >
                <img src="./images/scenario-shomei.png" class="scene_frame blink_anime small_view scenario-shomei" >
                <img src="./images/scenario-tv.png"  class="scene_frame blink_anime small_view scenario-tv" >
                <img src="./images/scenario-kyuji.png" class="scene_frame blink_anime small_view scenario-kyuji" >
			</div>

			<div class="exp_desc">
			<p>				帰宅する前に外からの遠隔操作で、
				エアコンと照明をオンにし、給湯を行います。

			</p>
            	<div class="scene_top_button">
    				<img border="0" src="./images/m_button_sceneback.png" class="btn_tap_anim exp_index""   alt="機器の操作に戻る">
    			</div>

			</div>

	</section>
  </ons-template>
   
    
</body>
</html>
